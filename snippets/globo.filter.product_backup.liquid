{% comment %} Do not edit this file {% endcomment %}
{% raw %}
{% assign root_url = {% endraw %}"{%- if routes.root_url != "/" -%}{{ routes.root_url }}{%- endif -%}"{% raw %} %}
{% assign currencyFormat = {% endraw %}{{ shop.money_format | json }}{% raw %} %}
{% assign swatch_options = '' | downcase | replace: ', ', ',' | split: ","  %}
{% assign image_options  = 'Color' | downcase | replace: ', ', ',' | split: ","  %}
{% assign text_options   = '' | downcase | replace: ', ', ',' | split: ","  %}
{% assign show_selected_variant_info = true %}

{% assign image_size     = '400x400' %}
{% assign images_count   = product.images | size %}
{% assign variants_count = product.variants | size %}
{% assign options_count  = product.options | size %}

{% assign no_image = 'https://cdn.shopify.com/s/images/themes/product-1.png' %}

{% assign featured_image            = product.featured_image %}
{% assign product_price             = product.price %}
{% assign product_compare_at_price  = product.compare_at_price %}
{% assign second_image_index        = 2 %}
{% assign selected_or_first_available_variant = product.selected_or_first_available_variant %}

{% if show_selected_variant_info and product.selected_variant %}
{% assign selected_or_first_available_variant = product.selected_variant %}
{% assign product_price             = selected_or_first_available_variant.price %}
{% assign product_compare_at_price  = selected_or_first_available_variant.compare_at_price %}
{% if selected_or_first_available_variant.image %}
{% assign featured_image  = selected_or_first_available_variant.image %}
{% endif %}
{% for image in product.images %}
{% if image.id == featured_image.id %}
{% if forloop.index == images_count %}
{% assign second_image_index = 1 %}
{% else %}
{% assign second_image_index = forloop.index | plus: 1 %}
{% endif %}
{% endif %}
{% endfor %}
{% endif %}

<div class="spf-col-xl-4 spf-col-lg-4 spf-col-md-6 spf-col-sm-6 spf-col-6 filter_product">
  <div class="spf-product-card spf-product-card__template-1{% unless product.available %} spf-soldout{% endunless %}">
    <div class="spf-product-card__inner">
      {% unless product.available %}
      <span translatable class="spf-product__label spf-product__label-soldout">Sold out</span>
      {% elsif product_compare_at_price > product_price %}
      <span translatable class="spf-product__label spf-product__label-sale">
        -{{ product_compare_at_price | minus: product_price | times: 100.0 | divided_by: product_compare_at_price | round }}%                          </span>
      {% endunless %}
      <a title="Quick view" href="javascript:;" onclick="globofilter.quickView('{{root_url}}{{product.url}}')" class="open-quick-view">Quick View</a>
      <a class="spf-product-card__image-wrapper{% if images_count > 1 %} hover-effect{% endif %}" href="{{root_url}}{{product.url}}" style="padding-top:100%;">
        
        <img class="spf-product-card__image spf-product-card__image-main"
             src="{{featured_image.src | img_url: image_size}}"
             alt="{{featured_image.alt | escape}}"
             />
        
        
        <img class="spf-product-card__image spf-product-card__image-secondary"
             src="{{product.images[second_image_index].src | img_url: image_size}}"
             alt="{{product.images[second_image_index].alt | escape}}"
             />
    
      </a>
      <form class="spf-product__form" action="/cart/add" method="post">
        <select name="id" class="spf-product__variants">
          {% for variant in product.variants %}
          <option data-option1="{{variant.option1 | escape}}" data-option2="{{variant.option2 | escape}}" data-option3="{{variant.option3 | escape}}" data-price="{{variant.price}}" data-compare_at_price="{{variant.compare_at_price}}" data-available="{{variant.available}}" data-image="{% if variant.image.src %}{{variant.image.src | img_url: image_size }}{% endif %}" {% if variant.id == selected_or_first_available_variant.id %} selected="selected" {% endif %} value="{{ variant.id }}">{{ variant.title }}</option>
          {% endfor %}
        </select>
        <button translatable {% unless product.available %}disabled{% endunless %} type="submit" class="spf-product__form-btn-addtocart" data-available="Add To Cart" data-soldout="Sold out" data-unavailable="Unavailable"><span>{% if product.available %}Add To Cart{% else %}Sold out{% endif %}</span></button>
      </form>
    </div>
    {% for option in product.options %}
    {% assign option_index = 'option' | append: forloop.index %}
    {% assign option_name  = option.name | downcase %}
    {% assign option_index_number = forloop.index %}
    {% if swatch_options contains option_name or text_options contains option_name or image_options contains option_name %}
    <div class="spf-product__swatchs">
      {% for value in option.values %}
      {% assign available = false %}
      {% assign swatch_image = false %}
      {% for variant in product.variants %}
      {% if variant[option_index] == value %}
      {% if swatch_image == false and variant.image %}
      {% assign swatch_image = variant.image.src %}
      {% endif %}
      {% if variant.available %}
      {% assign available = true %}
      {% endif %}
      {% endif %}
      {% endfor %}
      {% assign option_value  = value | downcase %}
      <span data-option="{{option_index_number}}" class="spf-product__swatch{% if selected_or_first_available_variant[option_index] == value %} is-selected{% endif %}{% unless available %} soldout{% endunless %}" title="{{value | escape}}" data-image="{% if swatch_image %}{{swatch_image | img_url: '500x500' }}{% endif %}">
        <span translatable class="spf-product__swatch-inner">
          {% if image_options contains option_name and swatch_image %}
          <span class="spf-product__swatch-image" style="background-image: url('{{ swatch_image | img_url: '200x' }}')"></span>
          {% elsif swatch_options contains option_name %}
          {% if swatches[option_name] and swatches[option_name][option_value] %}
          {% if swatches[option_name][option_value].mode == 1 %}
          <span class="spf-product__swatch-color" style="background-color: {{ swatches[option_name][option_value].color_1 }}"></span>
          {% elsif swatches[option_name][option_value].mode == 2 %}
          <span class="spf-product__swatch-color" style="background-color: {{ swatches[option_name][option_value].color_1 }}"></span>
          <span class="spf-product__swatch-color" style="border-right-color: {{ swatches[option_name][option_value].color_2 }}"></span>
          {% elsif swatches[option_name][option_value].mode == 3 %}
          <span class="spf-product__swatch-image" style="background-image: url('{{ swatches[option_name][option_value].image }}')"></span>
          {% endif %}
          {% elsif option_name contains 'colo' %}
          {% assign value_handle = option_value | handle %}
          {% assign value_jpg    = value_handle | append: '.jpg' %}
          {% assign value_png    = value_handle | append: '.png' %}
          {% assign value_jpeg   = value_handle | append: '.jpeg' %}
          <span class="spf-product__swatch-image" style="background-color: {{ option_value | replace:"'", "\'" | escape_once }};{% if images contains value_jpg %}background-image: url('{{ value_jpg | asset_img_url: '50x' | prepend: 'https:' }}'){% elsif images contains value_png %}background-image: url('{{ value_png | asset_img_url: '50x' | prepend: 'https:' }}'){% elsif images contains value_jpeg %}background-image: url('{{ value_jpeg | asset_img_url: '50x' | prepend: 'https:' }}'){% endif %}"></span>
          {% else %}
          <span class="spf-product__swatch-text">{{value}}</span>
          {% endif %}
          {% else %}
          <span class="spf-product__swatch-text">{{value}}</span>
          {% endif %}
        </span>
      </span>
      {% endfor %}
    </div>
    {% endif %}
    {% endfor %}
    <div class="spf-product__info">
      <div class="h4 spf-product-card__title"><a translatable href="{{root_url}}{{product.url}}">{{product.title}}</a></div>
      {% if product.vendor %}<div class="spf-product-card__vendor"><a href="/collections/vendors?q={{product.vendor | url_encode}}">{{product.vendor}}</a></div>{% endif %}


    </div>
  </div>
  <div class="spf-product-card__price-wrapper">
    {% if product_compare_at_price > product_price %}
    <div class="spf-product-card__price-wrapper_inner">
      <span class="spf-product-card__saleprice{% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_price | money }}</span>

      <span class="spf-product-card__oldprice{% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_compare_at_price | money }}</span>
    </div>
    <div class="spf-msrp">
      {%if product.metafields.Stuhrling.MSRP != null %}   <span data-href="https://stuhrling-evan.myshopify.com/{{product.url}}" class="price-review">MSRP: {{product.metafields.Stuhrling.MSRP}}</span>{%endif%}
    </div>
    {% else %}

    <span class="spf-product-card__price{% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_price | money }}</span>
    {%if product.metafields.Stuhrling.MSRP != null %} <span data-href="https://stuhrling-evan.myshopify.com/{{product.url}}" class="price-review">MSRP: {{product.metafields.Stuhrling.MSRP}}</span>{%endif%}
    {% endif %}
    
  </div>
        <div class='jdgm-widget jdgm-preview-badge' data-id='{{ product.id }}' data-template='manual-installation' data-auto-install='true'>{{product.metafields.judgeme.badge}}</div>

  
</div>
{% endraw %}
